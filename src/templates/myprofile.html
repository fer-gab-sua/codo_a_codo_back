<!DOCTYPE html>
<html>
<head>
    <title>My Profile</title>
</head>
<body>
    <h1>My Profile ssss</h1>
    <div id="profile-info"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var accessToken = getCookie('access_token');
            console.lot(accessToken)
            if (!accessToken) {
                alert('No access token found. Please log in.');
                /*window.location.href = '/login';*/
            } else {
                $.ajax({
                    url: '/myprofile_data',
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + accessToken
                    },
                    success: function(data) {
                        $('#profile-info').html(data);
                    },
                    error: function() {
                        alert('Error retrieving profile information. Please log in again.');
                        window.location.href = '/login';
                    }
                });
            }
        });

        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) return parts.pop().split(";").shift();
        }
    </script>
</body>
</html>